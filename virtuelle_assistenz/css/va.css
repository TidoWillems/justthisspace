:root{
  --bg:#fff; --ink:#222; --muted:#6b7280; --ring:#ececec;
  --btn:#f2f2f2; --btn-hover:#e8e8e8;

  --corner:12px;         /* Ziel-Offset oben rechts */
  --toggleSize:40px;     /* Endgröße Toggle-Kreis */

  --timeline:6.6s;       /* Start Szene B + Move */
  --travelDur:.95s;
  --fadeDur:.7s;
  --softLead:.20s;

  --titleLiftY:min(24vh, 180px);
  --titleLiftDur:.95s;
  --liftAdjust: 100px;   /* reduziert den Lift um 100px (nach unten) */
}

html,body{height:100%}
body{
  margin:0;background:var(--bg);color:var(--ink);
  font-family:Inter,system-ui,sans-serif;overflow-x:hidden
}

/* Szene A */
.stageA{
  min-height:100svh;display:flex;flex-direction:column;
  align-items:center;justify-content:center;padding:24px;position:relative
}
.note{opacity:.65;letter-spacing:.02em;font-size:.85rem;margin:0 0 .6rem;text-align:center}
.title{font-family:"Bebas Neue",system-ui,sans-serif;letter-spacing:.06em;text-align:center;margin:0 0 .9rem}
.title .sub{display:block;font-family:Inter,sans-serif;font-weight:500;letter-spacing:.02em;font-size:1rem;color:var(--muted)}
.titleBlock{transition:transform var(--titleLiftDur) ease;will-change:transform}
.lift .titleBlock{
  transform: translateY(calc((var(--titleLiftY) - var(--liftAdjust)) * -1));
}
/* Portal -> Toggle */
.portal{
  position:fixed; inset:auto; /* Startposition wird per JS gesetzt */
  width:min(68vw,420px); aspect-ratio:1/1; z-index:5;
  transition:
    top var(--travelDur) ease,
    left var(--travelDur) ease,
    right var(--travelDur) ease,
    width var(--travelDur) ease,
    transform var(--travelDur) ease;
}
.portal::after{
  content:""; position:absolute; inset:-8px;
}
.ring{
  position:relative;width:100%;height:100%;border-radius:50%;
  border:1px solid var(--ring);
  display:flex;align-items:center;justify-content:center;
  box-shadow:0 0 0 0 rgba(0,0,0,.06) inset;
  animation:breathe 7s ease-in-out infinite;
  background: radial-gradient(closest-side, rgba(0,0,0,.02), rgba(0,0,0,0) 70%);
}
.ring::before,.ring::after{
  content:"";position:absolute;inset:0;border-radius:50%;border:1px solid #f5f5f5;pointer-events:none
}
.ring::before{transform:scale(.93)}
.ring::after{transform:scale(1.07)}
@keyframes breathe{0%{opacity:.95}50%{opacity:1}100%{opacity:.95}}

/* Toggle wirklich unter die Safe-Area */
.to-corner{
  top: calc(var(--corner) + env(safe-area-inset-top));
  left: auto;
  right: var(--corner);
  transform: none;
  width: var(--toggleSize);
}
.as-toggle{border:1px solid #000;background:#fff;box-shadow:none}
.as-toggle::before,.as-toggle::after{border:none}

/* Szene B */
.sceneB{
  max-width:900px;margin:0 auto;
  padding:8px 20px 20px; /* dichter an den Header */
  opacity:0;transition:opacity var(--fadeDur) ease;pointer-events:none;
}
.sceneB.show-soft{opacity:.6}
.sceneB.show{opacity:1;pointer-events:auto}

h1{font-family:"Bebas Neue",system-ui,sans-serif;letter-spacing:.06em;margin:0 0 18px}
.lead{color:var(--muted);margin:0 0 18px}
.grid{display:grid;grid-template-columns:1fr;gap:14px}
@media(min-width:760px){.grid{grid-template-columns:1fr 1fr}}
.card{background:#f8fafc;border:1px solid #e5e7eb;border-radius:14px;padding:16px;transition:.2s}
.card:hover{background:#eef2f7;transform:translateY(-2px)}
.card h2{margin:.1rem 0 .4rem;font-size:1.1rem}
.card p{margin:.2rem 0 .2rem}
.muted{color:var(--muted);font-size:.95rem}
.hr{height:1px;background:#e5e7eb;margin:16px 0}
.small{font-size:.9rem}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce){
  .portal{top:var(--corner);left:auto;right:var(--corner);width:var(--toggleSize);transform:none}
  .ring{border:1px solid #000;background:#fff}
  .ring::before,.ring::after{display:none}
  .sceneB{opacity:1;pointer-events:auto}
  .titleBlock{transform:translateY(calc(var(--titleLiftY) * -1))}
}

/* etwas Puffer, damit der Titel nicht unter die Browser-Chrome rutscht */
body.lift{
  padding-top: max(env(safe-area-inset-top), 4px);
}

/* --- Feinabstimmung nach dem Lift --- */
body.lift #stageA{
  min-height: calc((var(--titleLiftY) - var(--liftAdjust)) + 48px);
}

body.lift .sceneB{
  margin-top: clamp(4px, 1.2vh, 14px);
}

/* Wenn der Toggle oben rechts klein ist, darf er "echter Knopf" wirken */
.ring.as-toggle{
  transition: box-shadow .2s ease, transform .2s ease;
}
.ring.as-toggle:active{
  transform: scale(.96);
  box-shadow: 0 0 0 2px rgba(0,0,0,.06) inset;
}

/* Headline-Größen */
.title{
  font-size: clamp(2.2rem, 7vw, 3.8rem);
}
.sceneB > h1{
  font-size: clamp(1.8rem, 6vw, 2.6rem);
}

/* Mobile: kürzerer Lift + kleinere Headline */
@media (max-width: 480px){
  :root{
    --titleLiftY: min(14vh, 110px);  /* etwas weniger Lift */
  }
  .title{
    font-size: clamp(1.9rem, 8vw, 3.2rem);
  }
  .sceneB > h1{
    font-size: clamp(1.6rem, 6vw, 2.2rem);
  }
}
/* --- sanfter Crossfade zwischen Hell/Dunkel --- */
html, body {
  transition: background-color .45s ease, color .45s ease;
}

.portal, .ring, .card, .sceneB, .titleBlock {
  transition: background-color .45s ease, color .45s ease, border-color .45s ease;
}
/* Crossfade-Animation zwischen Hell/Dunkel */
body {
  opacity: 1;
  transition: opacity .45s ease;
}
body.fade-out {
  opacity: 0;
}
/* klarer Fokus für Tastatur-Nutzer */
:focus-visible {
  outline: 2px solid #94a3b8; /* dezent */
  outline-offset: 2px;
}

.visually-hidden-focusable {
  position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden;
}
.visually-hidden-focusable:focus {
  position:static;width:auto;height:auto;
}
.visually-hidden-focusable {
  position:absolute!important; width:1px; height:1px; padding:0; margin:-1px;
  overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0;
}
.visually-hidden-focusable:focus,
.visually-hidden-focusable:active {
  position:static!important; width:auto; height:auto; margin:0;
  overflow:visible; clip:auto; white-space:normal;
  background:#eef2ff; padding:.4rem .6rem; border-radius:8px;
}
