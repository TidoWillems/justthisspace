<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ich bin – und das ist genug</title>

  <!-- Build-Version -->
  <script>window.BUILD="20251006-234746";</script>
  <script defer src="genug.js?v=20251006-234746"></script>
  <link rel="stylesheet" href="style.css?v=20251006-234746">

  <style>
    :root{
      --ink:#111827;
      --muted:#6b7280;
    }

    /* Header-Erweiterung: Chip + Sprache, passend zu genug-Layout */
    header{
      position:sticky;
      top:0;
      z-index:5;
    }

    .toprow{
      display:flex;
      align-items:center;
      gap:.6rem;
      flex-wrap:wrap;
      margin-bottom:.35rem;
    }

    .toprow .spacer{
      flex:1 1 auto;
    }

    .lang-box{
      display:flex;
      align-items:center;
      gap:.4rem;
      font-size:.9rem;
      color:var(--muted);
    }

    .lang-box label{
      cursor:pointer;
    }

    .lang-box select{
      appearance:none;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.5);
      padding:.3rem .85rem;
      font-size:.85rem;
      background:var(--card, #f7f7f8);
      color:var(--fg, #111827);
      font-family:system-ui,-apple-system,"Segoe UI",sans-serif;
    }

    .lang-box select:focus{
      outline:2px solid #b28b47;
      outline-offset:1px;
    }

    .chip {
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:.45rem;
      padding:.24rem .8rem;
      border-radius:999px;
      font-size:.85rem;
      cursor:pointer;
      isolation:isolate;
      position:relative;
      text-decoration:none;
      background:radial-gradient(circle at 30% 30%,
                #f8e4b7 0%, #ddb266 45%, #b28b47 100%);
      color:#fff;
      border:1px solid rgba(178,139,71,0.35);
      box-shadow:
        0 3px 8px rgba(0,0,0,0.22),
        0 0 0 1px rgba(178,139,71,0.32);
      transition:
        background .35s ease,
        box-shadow .35s ease,
        transform .25s ease,
        opacity .25s ease;
      opacity:0;
      animation:chipFadeIn 1.1s ease-out forwards;
    }

    .chip::before{
      content:"";
      position:absolute;
      inset:-10px;
      border-radius:999px;
      z-index:-1;
      background:radial-gradient(
        circle,
        rgba(178,139,71,0.70) 0%,
        rgba(178,139,71,0.35) 35%,
        rgba(178,139,71,0.10) 65%,
        transparent 100%
      );
      filter:blur(8px);
      opacity:0.85;
      animation:haloPulseChip 5s ease-in-out infinite;
    }

    @keyframes haloPulseChip{
      0%,100%{transform:scale(0.9);opacity:0.6;}
      50%{transform:scale(1.12);opacity:1;}
    }

    @keyframes chipFadeIn{
      from{opacity:0;transform:translateY(-3px) scale(0.96);}
      to{opacity:1;transform:translateY(0) scale(1);}
    }

    .chip:hover{
      background:radial-gradient(circle at 30% 30%,
                #fbe9bf 0%, #e0b96f 40%, #c0924d 100%);
      box-shadow:
        0 4px 12px rgba(0,0,0,0.26),
        0 0 0 1px rgba(178,139,71,0.5);
    }

    .chip:active{transform:scale(0.97);}
    .chip:active::before{transform:scale(1.18);opacity:1;}

    @media (prefers-reduced-motion: reduce){
      .chip{animation:none;}
      .chip::before{animation:none;}
    }

    @media (max-width: 960px){
      .toprow{
        margin-bottom:.25rem;
      }
    }
  </style>
</head>

<body>
  <div class="overlay" id="overlay" aria-hidden="true"></div>

  <header>
    <div class="toprow">
      <a href="../index.html"
         class="chip"
         id="chipHome"
         aria-label="Zur Startseite justthisspace">
        JTS
      </a>

      <h1 class="site-title" id="siteTitle">Ich bin – und das ist genug</h1>

      <div class="spacer"></div>

      <div class="lang-box">
        <label for="lang" id="langLabel">Sprache</label>
        <select id="lang" aria-label="Sprache wählen">
          <option value="de">Deutsch</option>
          <option value="en">English</option>
          <option value="fr">Français</option>
        </select>
      </div>
    </div>

    <div class="toolbar">
      <button class="btn" id="navToggle" aria-expanded="false" aria-controls="nav">☰ Menü</button>
      <button class="btn" id="themeToggle" title="Thema umschalten">☯︎ Theme</button>
      <a class="btn" href="../index.html">← justthisspace</a>
    </div>
  </header>

  <div class="layout">
    <aside>
      <div class="search">
        <input id="search" type="search" placeholder="Suche Dateien …" />
      </div>
      <ul id="nav" class="tree">Lade Dateien…</ul>
    </aside>

    <main>
      <div class="card">
        <div id="toc" class="toc" hidden></div>
        <article id="content">Wähle eine Datei.</article>
        <a class="toplink" href="#">⬆️ nach oben</a>
      </div>
    </main>
  </div>

  <footer>
    <small id="footerStamp">© justthis.space — Stand: 20251006-234746</small>
  </footer>

  <script>
    // Kleine I18N-Schicht für Titel / Label
    const T = {
      de: {
        brand: "JTS",
        title: "Ich bin – und das ist genug",
        langLabel: "Sprache",
        docTitle: "Ich bin – und das ist genug",
        footerPrefix: "© justthis.space — Stand:"
      },
      en: {
        brand: "JTS",
        title: "I am – and that is enough",
        langLabel: "Language",
        docTitle: "I am – and that is enough",
        footerPrefix: "© justthis.space — build:"
      },
      fr: {
        brand: "JTS",
        title: "Je suis – et c’est suffisant",
        langLabel: "Langue",
        docTitle: "Je suis – et c’est suffisant",
        footerPrefix: "© justthis.space — version :"
      }
    };

    const $ = sel => document.querySelector(sel);
    const els = {
      chip: $('#chipHome'),
      title: $('#siteTitle'),
      label: $('#langLabel'),
      select: $('#lang'),
      footer: $('#footerStamp')
    };

    const BUILD = window.BUILD || "dev";

    function getStoredLang(){
      try{
        return window.localStorage.getItem('jts-i18n-lang');
      }catch(e){ return null; }
    }

    function storeLang(lang){
      try{
        window.localStorage.setItem('jts-i18n-lang', lang);
      }catch(e){}
    }

    function getNavigatorLang(){
      try{
        return (navigator.language || 'de').slice(0,2);
      }catch(e){
        return 'de';
      }
    }

    function render(lang){
      const t = T[lang] || T.de;
      document.documentElement.lang = lang;
      document.title = t.docTitle;

      if(els.chip) els.chip.textContent = t.brand;
      if(els.title) els.title.textContent = t.title;
      if(els.label) els.label.textContent = t.langLabel;
      if(els.footer) els.footer.textContent = `${t.footerPrefix} ${BUILD}`;

      storeLang(lang);
    }

    (function initI18N(){
      if(!els.select) return;
      const supported = ['de','en','fr'];
      const stored = getStoredLang();
      const navLang = getNavigatorLang();
      const candidate = stored || navLang || 'de';
      const initial = supported.includes(candidate) ? candidate : 'de';

      els.select.value = initial;
      render(initial);

      els.select.addEventListener('change', e => {
        render(e.target.value);
      });
    })();
  </script>
</body>
</html>
